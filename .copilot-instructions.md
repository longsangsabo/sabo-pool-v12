# COPILOT INSTRUCTIONS FOR SABO POOL
# ====================================

# üéØ OVERVIEW
# This file tells Copilot HOW to work with SABO Pool services effectively
# Copilot: Read this file to understand the project structure and workflow

## üìÅ PROJECT STRUCTURE
```
/workspaces/sabo-pool-v12/
‚îú‚îÄ‚îÄ apps/sabo-user/src/services/           # Main services location
‚îÇ   ‚îú‚îÄ‚îÄ serviceDiscovery.ts                # üîç READ THIS FIRST - Service discovery system
‚îÇ   ‚îú‚îÄ‚îÄ index.ts                           # Central exports
‚îÇ   ‚îú‚îÄ‚îÄ userService.ts                     # User management
‚îÇ   ‚îú‚îÄ‚îÄ tournamentService.ts               # Tournament management
‚îÇ   ‚îî‚îÄ‚îÄ ... (43 total services)
‚îú‚îÄ‚îÄ packages/shared-business/src/          # Shared services
‚îú‚îÄ‚îÄ docs/SERVICES_DEVELOPMENT_GUIDE.md    # Development patterns
‚îú‚îÄ‚îÄ SERVICES_REFERENCE.md                 # Complete service documentation
‚îî‚îÄ‚îÄ SERVICES_IMPORTS.md                   # Copy-paste imports
```

## üöÄ COPILOT WORKFLOW (STEP-BY-STEP)

### STEP 1: Read Service Discovery
```
ALWAYS start by reading: /workspaces/sabo-pool-v12/apps/sabo-user/src/services/serviceDiscovery.ts
This file contains:
- Complete service registry
- Use case mappings
- File locations
- Dependencies
- Examples
```

### STEP 2: Find Relevant Services
```typescript
// Example: User wants to "create a tournament with payment"
import { findServicesFor, getServiceLocation } from './serviceDiscovery';

const services = findServicesFor('create tournament');
// Returns: ['tournamentService', 'userService', 'paymentService', 'notificationService']
```

### STEP 3: Read Service Files
```
For each service found:
1. Get file path: getServiceLocation('tournamentService')
2. Read the actual service file to understand API
3. Check dependencies: getServiceDependencies('tournamentService')
4. Look at examples: getServiceExamples('tournamentService')
```

### STEP 4: Implement Solution
```typescript
// Use the services with proper imports
import { tournamentService, paymentService, userService } from '@/services';

// Implement the feature
const tournament = await tournamentService.createTournament(data);
await paymentService.processPayment(paymentData);
```

## üîç DISCOVERY FUNCTIONS (Use These!)

```typescript
// Find services for any use case
findServicesFor('user login') ‚Üí ['authService', 'userService', 'sessionService']
findServicesFor('send notification') ‚Üí ['notificationService', 'emailService', 'userService']
findServicesFor('upload file') ‚Üí ['storageService', 'userService', 'validationService']

// Get file location to read
getServiceLocation('userService') ‚Üí '/workspaces/sabo-pool-v12/apps/sabo-user/src/services/userService.ts'

// Search by keyword
searchServices('payment') ‚Üí ['paymentService', 'walletService', 'transactionService']

// Get service details
getServiceInfo('userService') ‚Üí { name, filePath, methods, dependencies, examples }
```

## üìö DOCUMENTATION PRIORITY

1. **serviceDiscovery.ts** - üî• READ FIRST - Service registry and discovery
2. **SERVICES_REFERENCE.md** - Complete service documentation
3. **docs/SERVICES_DEVELOPMENT_GUIDE.md** - Development patterns
4. **SERVICES_IMPORTS.md** - Import examples
5. **Individual service files** - Specific implementations

## üéØ COMMON USE CASES ‚Üí SERVICES

| User Request | Primary Services | Supporting Services |
|--------------|------------------|-------------------|
| "Create user account" | userService, authService | profileService, emailService |
| "Start tournament" | tournamentService | userService, paymentService, notificationService |
| "Process payment" | paymentService, walletService | transactionService, userService |
| "Send notification" | notificationService | emailService, userService |
| "Upload profile picture" | storageService | userService, validationService |
| "Real-time chat" | webSocketService | messageService, notificationService |
| "Offline support" | offlineService | syncService, cacheService |
| "Generate report" | reportingService | analyticsService, userService |
| "Manage club" | clubService | memberService, userService, roleService |
| "Verify rank" | verificationService | rankService, userService, storageService |

## üîß SERVICE PATTERNS

### Standard Service Structure
```typescript
export class ServiceName {
  // Main CRUD operations
  async create(data: CreateData): Promise<Entity>
  async getById(id: string): Promise<Entity | null>
  async update(id: string, data: UpdateData): Promise<Entity>
  async delete(id: string): Promise<void>
  
  // Custom business methods
  async customMethod(params: Params): Promise<Result>
  
  // Private helpers
  private validate(data: any): void
  private transform(data: any): any
  private handleError(error: any): Error
}
```

### Import Patterns
```typescript
// Single service
import { userService } from '@/services/userService';

// Multiple services
import { userService, tournamentService, paymentService } from '@/services';

// Shared service
import { PaymentService } from '@sabo-pool/shared-business/payment/PaymentService';
```

## ‚ö†Ô∏è IMPORTANT RULES

1. **ALWAYS check serviceDiscovery.ts first** - Don't guess which services exist
2. **Read actual service files** - Don't assume API based on names
3. **Check dependencies** - Understand service relationships
4. **Use examples** - Follow established patterns
5. **Handle errors** - All services have consistent error handling
6. **Validate inputs** - Services expect proper data validation

## üö® ERROR PREVENTION

### Common Mistakes to Avoid:
- ‚ùå Using services without reading their actual implementation
- ‚ùå Assuming service methods without checking the file
- ‚ùå Ignoring service dependencies
- ‚ùå Not handling errors properly
- ‚ùå Calling non-existent methods

### Best Practices:
- ‚úÖ Read serviceDiscovery.ts first
- ‚úÖ Check actual service file before using
- ‚úÖ Follow import patterns from SERVICES_IMPORTS.md
- ‚úÖ Use proper error handling
- ‚úÖ Validate inputs before service calls

## üîÑ EXAMPLE COPILOT WORKFLOW

### User Request: "I want to create a tournament where users pay to join"

**Step 1: Discovery**
```typescript
import { findServicesFor, getServiceLocation } from './serviceDiscovery';

const services = findServicesFor('create tournament');
// Returns: ['tournamentService', 'userService', 'paymentService', 'notificationService']
```

**Step 2: Read Service Files**
```
Read files:
- /workspaces/sabo-pool-v12/apps/sabo-user/src/services/tournamentService.ts
- /workspaces/sabo-pool-v12/apps/sabo-user/src/services/paymentService.ts
- /workspaces/sabo-pool-v12/apps/sabo-user/src/services/userService.ts
- /workspaces/sabo-pool-v12/apps/sabo-user/src/services/notificationService.ts
```

**Step 3: Check Examples**
```typescript
const examples = getServiceExamples('tournamentService');
// See how to use tournamentService.createTournament()
```

**Step 4: Implement**
```typescript
import { tournamentService, paymentService, userService, notificationService } from '@/services';

export async function createPaidTournament(tournamentData: CreateTournamentData, creatorId: string) {
  try {
    // Verify user exists
    const user = await userService.getUserById(creatorId);
    if (!user) throw new Error('User not found');
    
    // Create tournament
    const tournament = await tournamentService.createTournament({
      ...tournamentData,
      creatorId,
      requiresPayment: true
    });
    
    // Send creation notification
    await notificationService.sendNotification({
      userId: creatorId,
      title: 'Tournament Created',
      message: `Your tournament "${tournament.name}" has been created successfully`
    });
    
    return tournament;
  } catch (error) {
    console.error('Failed to create paid tournament:', error);
    throw error;
  }
}
```

## üìä SERVICE METRICS

- **Total Services**: 43
- **Categories**: 11
- **Implementation Status**: 100% (all services have implementations)
- **Documentation Coverage**: 100%
- **Test Coverage**: TBD (needs implementation)

## üîó QUICK LINKS

- Service Discovery: `/apps/sabo-user/src/services/serviceDiscovery.ts`
- Central Exports: `/apps/sabo-user/src/services/index.ts`
- Documentation: `/docs/SERVICES_DEVELOPMENT_GUIDE.md`
- Reference: `/SERVICES_REFERENCE.md`
- Import Guide: `/SERVICES_IMPORTS.md`

---

**Remember**: The key to working effectively with SABO Pool services is to **DISCOVER ‚Üí READ ‚Üí UNDERSTAND ‚Üí IMPLEMENT**. Always start with serviceDiscovery.ts!
