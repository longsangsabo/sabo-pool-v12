{
  "timestamp": "2025-08-31T04:37:46.703Z",
  "database_url": "https://exlqvlbawytbglioqfbc.supabase.co",
  "available_tables": [
    {
      "table_name": "profiles",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "users",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "user_roles",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "user_preferences",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "challenges",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "challenge_participants",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "game_sessions",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "shots",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "tournaments",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "tournament_brackets",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "tournament_registrations",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "clubs",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "club_members",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "club_settings",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "wallets",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "wallet_transactions",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "payment_transactions",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "ranks",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "rank_requirements",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "ranking_history",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "notifications",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "system_events",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "analytics_events",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "achievements",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "leaderboards",
      "accessible": true,
      "row_count": 0
    },
    {
      "table_name": "settings",
      "accessible": true,
      "row_count": 0
    }
  ],
  "table_counts": {
    "profiles": {
      "count": 181,
      "last_checked": "2025-08-31T04:37:48.579Z",
      "status": "accessible",
      "sample_columns": [
        "id",
        "user_id",
        "full_name",
        "display_name",
        "avatar_url",
        "bio",
        "verified_rank",
        "elo",
        "created_at",
        "updated_at",
        "is_admin",
        "phone",
        "skill_level",
        "active_role",
        "role",
        "nickname",
        "email",
        "city",
        "district",
        "member_since",
        "completion_percentage",
        "is_demo_user",
        "ban_status",
        "ban_reason",
        "banned_at",
        "banned_by",
        "cover_image_url",
        "current_rank",
        "spa_points",
        "player_id",
        "is_temp_player"
      ],
      "sample_record": {
        "id": "4b18f69b-d907-48d9-b27e-9b43431b48db",
        "user_id": "ed64fe18-5794-4cdb-bc62-17ce7697e83e",
        "full_name": null,
        "display_name": null,
        "avatar_url": null,
        "bio": null,
        "verified_rank": null,
        "elo": 1000,
        "created_at": "2025-08-23T11:28:23.024234+00:00",
        "updated_at": "2025-08-23T11:28:23.024234+00:00",
        "is_admin": false,
        "phone": null,
        "skill_level": "beginner",
        "active_role": "player",
        "role": "player",
        "nickname": null,
        "email": null,
        "city": null,
        "district": null,
        "member_since": "2025-08-23T11:28:23.024234+00:00",
        "completion_percentage": 0,
        "is_demo_user": false,
        "ban_status": "active",
        "ban_reason": null,
        "banned_at": null,
        "banned_by": null,
        "cover_image_url": null,
        "current_rank": "K",
        "spa_points": 0,
        "player_id": "ed64fe18-5794-4cdb-bc62-17ce7697e83e",
        "is_temp_player": false
      }
    },
    "users": {
      "count": 0,
      "last_checked": "2025-08-31T04:37:48.691Z",
      "status": "accessible"
    },
    "user_roles": {
      "count": 97,
      "last_checked": "2025-08-31T04:37:48.799Z",
      "status": "accessible",
      "sample_columns": [
        "id",
        "user_id",
        "role",
        "created_at",
        "created_by"
      ],
      "sample_record": {
        "id": "62669536-104d-4306-95e9-70bc823fc317",
        "user_id": "18f6e853-b072-47fb-9c9a-e5d42a5446a5",
        "role": "user",
        "created_at": "2025-08-22T03:07:16.42139+00:00",
        "created_by": null
      }
    },
    "user_preferences": {
      "count": 0,
      "last_checked": "2025-08-31T04:37:48.895Z",
      "status": "accessible"
    },
    "challenges": {
      "count": 10,
      "last_checked": "2025-08-31T04:37:49.011Z",
      "status": "accessible",
      "sample_columns": [
        "id",
        "challenger_id",
        "opponent_id",
        "status",
        "challenge_message",
        "response_message",
        "created_at",
        "responded_at",
        "completed_at",
        "is_open_challenge",
        "bet_points",
        "race_to",
        "handicap_1_rank",
        "handicap_05_rank",
        "message",
        "expires_at",
        "challenge_type",
        "handicap_data",
        "club_id",
        "scheduled_time",
        "challenger_score",
        "opponent_score",
        "winner_id",
        "started_at",
        "updated_at",
        "challenger_name",
        "location",
        "required_rank",
        "is_sabo",
        "club_confirmed",
        "club_confirmed_at",
        "club_confirmed_by",
        "club_note",
        "challenger_player_id",
        "opponent_player_id",
        "bet_amount"
      ],
      "sample_record": {
        "id": "c3e2d2c1-69d5-47a8-9d30-05f926498919",
        "challenger_id": "21c71eb2-3a42-4589-9089-24a9340a0e6a",
        "opponent_id": null,
        "status": "declined",
        "challenge_message": null,
        "response_message": null,
        "created_at": "2025-08-23T12:19:49.62875+00:00",
        "responded_at": null,
        "completed_at": null,
        "is_open_challenge": true,
        "bet_points": 100,
        "race_to": 8,
        "handicap_1_rank": "0",
        "handicap_05_rank": "0",
        "message": "",
        "expires_at": "2025-08-25T12:19:49.263+00:00",
        "challenge_type": "standard",
        "handicap_data": {},
        "club_id": "8d883f90-0c54-4757-adba-25f1d5c02174",
        "scheduled_time": null,
        "challenger_score": 0,
        "opponent_score": 0,
        "winner_id": null,
        "started_at": null,
        "updated_at": "2025-08-23T14:11:59.773972+00:00",
        "challenger_name": "Trần hải",
        "location": "SBO POOL ARENA",
        "required_rank": "I",
        "is_sabo": true,
        "club_confirmed": false,
        "club_confirmed_at": null,
        "club_confirmed_by": null,
        "club_note": null,
        "challenger_player_id": "21c71eb2-3a42-4589-9089-24a9340a0e6a",
        "opponent_player_id": null,
        "bet_amount": 100
      }
    },
    "challenge_participants": {
      "count": 0,
      "last_checked": "2025-08-31T04:37:49.127Z",
      "status": "accessible"
    },
    "game_sessions": {
      "count": 0,
      "last_checked": "2025-08-31T04:37:49.231Z",
      "status": "accessible"
    },
    "shots": {
      "count": 0,
      "last_checked": "2025-08-31T04:37:49.317Z",
      "status": "accessible"
    },
    "tournaments": {
      "count": 2,
      "last_checked": "2025-08-31T04:37:49.485Z",
      "status": "accessible",
      "sample_columns": [
        "id",
        "name",
        "description",
        "tournament_type",
        "game_format",
        "tier_level",
        "max_participants",
        "current_participants",
        "tournament_start",
        "tournament_end",
        "registration_start",
        "registration_end",
        "club_id",
        "venue_address",
        "entry_fee",
        "prize_pool",
        "first_prize",
        "second_prize",
        "third_prize",
        "prize_distribution",
        "status",
        "management_status",
        "rules",
        "contact_info",
        "banner_image",
        "min_rank_requirement",
        "max_rank_requirement",
        "eligible_ranks",
        "allow_all_ranks",
        "requires_approval",
        "is_public",
        "has_third_place_match",
        "created_by",
        "created_at",
        "updated_at",
        "venue_name",
        "start_date",
        "end_date",
        "registration_fee",
        "is_visible",
        "deleted_at",
        "tier",
        "elo_multiplier",
        "live_stream_url",
        "sponsor_info",
        "spa_points_config",
        "elo_points_config",
        "comprehensive_rewards",
        "special_rules",
        "tournament_format_details",
        "physical_prizes",
        "winner_id",
        "parent_tournament_id",
        "tournament_format",
        "group_number",
        "group_assignment_method"
      ],
      "sample_record": {
        "id": "87b3025c-b668-4b37-876c-4eb186bc3564",
        "name": "TRIBUTE TO CHAMPIONSHIP ",
        "description": "SABO 9 BALL OPEN Season 1",
        "tournament_type": "double_elimination",
        "game_format": "9_ball",
        "tier_level": 1,
        "max_participants": 32,
        "current_participants": 0,
        "tournament_start": "2025-08-24T01:15:00+00:00",
        "tournament_end": "2025-08-24T12:30:00+00:00",
        "registration_start": "2025-08-22T09:46:29.732+00:00",
        "registration_end": "2025-08-24T00:00:00+00:00",
        "club_id": "8d883f90-0c54-4757-adba-25f1d5c02174",
        "venue_address": "601 A Nguyễn An Ninh",
        "entry_fee": 300000,
        "prize_pool": 10000000,
        "first_prize": 0,
        "second_prize": 0,
        "third_prize": 0,
        "prize_distribution": {},
        "status": "registration_open",
        "management_status": "draft",
        "rules": null,
        "contact_info": null,
        "banner_image": null,
        "min_rank_requirement": null,
        "max_rank_requirement": null,
        "eligible_ranks": [],
        "allow_all_ranks": true,
        "requires_approval": false,
        "is_public": true,
        "has_third_place_match": false,
        "created_by": "18f49e79-f402-46d1-90be-889006e9761c",
        "created_at": "2025-08-22T09:49:48.438668+00:00",
        "updated_at": "2025-08-22T09:52:34.836923+00:00",
        "venue_name": null,
        "start_date": null,
        "end_date": null,
        "registration_fee": 0,
        "is_visible": true,
        "deleted_at": null,
        "tier": "I",
        "elo_multiplier": 1,
        "live_stream_url": null,
        "sponsor_info": {},
        "spa_points_config": {},
        "elo_points_config": {},
        "comprehensive_rewards": {},
        "special_rules": {},
        "tournament_format_details": {},
        "physical_prizes": [],
        "winner_id": null,
        "parent_tournament_id": null,
        "tournament_format": null,
        "group_number": null,
        "group_assignment_method": null
      }
    },
    "tournament_brackets": {
      "count": 0,
      "last_checked": "2025-08-31T04:37:49.591Z",
      "status": "accessible"
    },
    "tournament_registrations": {
      "count": 284,
      "last_checked": "2025-08-31T04:37:49.698Z",
      "status": "accessible",
      "sample_columns": [
        "id",
        "tournament_id",
        "user_id",
        "registration_status",
        "payment_status",
        "registration_date",
        "payment_date",
        "notes",
        "created_at",
        "updated_at",
        "player_id"
      ],
      "sample_record": {
        "id": "fce564e3-ac69-42cc-a312-8bf2f67da9e3",
        "tournament_id": "7aba5a78-5c2b-4884-937d-99274220b019",
        "user_id": "74f72a82-d447-4dfd-a5f8-36701963b5d1",
        "registration_status": "confirmed",
        "payment_status": "paid",
        "registration_date": "2025-08-23T02:02:29.093+00:00",
        "payment_date": "2025-08-23T02:02:29.093+00:00",
        "notes": "Added by admin via quick add",
        "created_at": "2025-08-23T02:02:30.202072+00:00",
        "updated_at": "2025-08-23T02:02:30.202072+00:00",
        "player_id": "74f72a82-d447-4dfd-a5f8-36701963b5d1"
      }
    },
    "clubs": {
      "count": 0,
      "last_checked": "2025-08-31T04:37:49.794Z",
      "status": "accessible"
    },
    "club_members": {
      "count": 10,
      "last_checked": "2025-08-31T04:37:49.886Z",
      "status": "accessible",
      "sample_columns": [
        "id",
        "club_id",
        "user_id",
        "membership_type",
        "membership_number",
        "join_date",
        "status",
        "expiry_date",
        "total_visits",
        "last_visit",
        "total_hours_played",
        "preferred_table_types",
        "preferred_time_slots",
        "notification_preferences",
        "membership_fee",
        "outstanding_balance",
        "created_at",
        "updated_at",
        "role"
      ],
      "sample_record": {
        "id": "858f87d5-055d-4ab9-af63-9ea13d43ca23",
        "club_id": "8d883f90-0c54-4757-adba-25f1d5c02174",
        "user_id": "74f72a82-d447-4dfd-a5f8-36701963b5d1",
        "membership_type": "regular",
        "membership_number": "CLBC021746868",
        "join_date": "2025-08-22T09:31:23.810402+00:00",
        "status": "active",
        "expiry_date": null,
        "total_visits": 0,
        "last_visit": null,
        "total_hours_played": 0,
        "preferred_table_types": null,
        "preferred_time_slots": null,
        "notification_preferences": {},
        "membership_fee": 0,
        "outstanding_balance": 0,
        "created_at": "2025-08-22T13:59:46.917509+00:00",
        "updated_at": "2025-08-22T13:59:46.917509+00:00",
        "role": "member"
      }
    },
    "club_settings": {
      "count": 0,
      "last_checked": "2025-08-31T04:37:49.964Z",
      "status": "accessible"
    },
    "wallets": {
      "count": 186,
      "last_checked": "2025-08-31T04:37:50.063Z",
      "status": "accessible",
      "sample_columns": [
        "id",
        "user_id",
        "points_balance",
        "total_earned",
        "total_spent",
        "created_at",
        "updated_at",
        "balance",
        "status"
      ],
      "sample_record": {
        "id": "c8a9f961-15f1-412c-8961-b53958e85d86",
        "user_id": "519cf7c9-e112-40b2-9e4d-0cd44783ec9e",
        "points_balance": 0,
        "total_earned": 0,
        "total_spent": 0,
        "created_at": "2025-07-22T00:38:30.132097+00:00",
        "updated_at": "2025-07-23T03:23:34.814432+00:00",
        "balance": 0,
        "status": "active"
      }
    },
    "wallet_transactions": {
      "count": 0,
      "last_checked": "2025-08-31T04:37:50.178Z",
      "status": "accessible"
    },
    "payment_transactions": {
      "count": 0,
      "last_checked": "2025-08-31T04:37:50.282Z",
      "status": "accessible"
    },
    "ranks": {
      "count": 12,
      "last_checked": "2025-08-31T04:37:50.380Z",
      "status": "accessible",
      "sample_columns": [
        "id",
        "code",
        "rank_name",
        "rank_order",
        "elo_requirement",
        "rank_color",
        "description",
        "created_at",
        "updated_at",
        "level"
      ],
      "sample_record": {
        "id": "8cd47209-05e6-42c7-b8b4-2e59b2cb64e1",
        "code": "K",
        "rank_name": "Hạng K",
        "rank_order": 1,
        "elo_requirement": 1000,
        "rank_color": "text-slate-600",
        "description": "Hạng thấp nhất",
        "created_at": "2025-07-21T08:42:52.480869+00:00",
        "updated_at": "2025-08-03T02:15:27.454384+00:00",
        "level": 1
      }
    },
    "rank_requirements": {
      "count": 0,
      "last_checked": "2025-08-31T04:37:50.474Z",
      "status": "accessible"
    },
    "ranking_history": {
      "count": 0,
      "last_checked": "2025-08-31T04:37:50.579Z",
      "status": "accessible"
    },
    "notifications": {
      "count": 692,
      "last_checked": "2025-08-31T04:37:50.675Z",
      "status": "accessible",
      "sample_columns": [
        "id",
        "user_id",
        "title",
        "message",
        "type",
        "is_read",
        "action_url",
        "created_at",
        "updated_at",
        "deleted_at",
        "auto_popup",
        "priority",
        "metadata",
        "club_id",
        "category",
        "challenge_id",
        "tournament_id",
        "match_id",
        "icon",
        "action_text",
        "scheduled_for",
        "expires_at",
        "is_archived"
      ],
      "sample_record": {
        "id": "ecc6c1c1-c8e9-4061-b754-385666040101",
        "user_id": "18f49e79-f402-46d1-90be-889006e9761c",
        "title": "Yêu cầu xác thực hạng mới",
        "message": "Có yêu cầu xác thực hạng K+ từ Sang tại CLB SBO POOL ARENA",
        "type": "rank_request",
        "is_read": false,
        "action_url": "/club-dashboard?tab=rank-verification",
        "created_at": "2025-08-18T03:21:36.462148+00:00",
        "updated_at": "2025-08-18T03:21:36.462148+00:00",
        "deleted_at": null,
        "auto_popup": true,
        "priority": "high",
        "metadata": {},
        "club_id": null,
        "category": "general",
        "challenge_id": null,
        "tournament_id": null,
        "match_id": null,
        "icon": "bell",
        "action_text": null,
        "scheduled_for": null,
        "expires_at": null,
        "is_archived": false
      }
    },
    "system_events": {
      "count": 0,
      "last_checked": "2025-08-31T04:37:50.760Z",
      "status": "accessible"
    },
    "analytics_events": {
      "count": 0,
      "last_checked": "2025-08-31T04:37:50.878Z",
      "status": "accessible"
    },
    "achievements": {
      "count": 0,
      "last_checked": "2025-08-31T04:37:50.972Z",
      "status": "accessible"
    },
    "leaderboards": {
      "count": 0,
      "last_checked": "2025-08-31T04:37:51.048Z",
      "status": "accessible"
    },
    "settings": {
      "count": 0,
      "last_checked": "2025-08-31T04:37:51.145Z",
      "status": "accessible"
    }
  },
  "codebase_analysis": {
    "typescript_files": [
      "/workspaces/sabo-pool-v12/vite.config.ts",
      "/workspaces/sabo-pool-v12/e2e/ranking.spec.ts",
      "/workspaces/sabo-pool-v12/e2e/payment.spec.ts",
      "/workspaces/sabo-pool-v12/e2e/tournament.spec.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/sabo-match-updates/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/database-optimization/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/payment-callback/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/create-payment/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/rank-request-notification/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/send-score-confirmation-email/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/auto-translate/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/milestone-triggers/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/multi-channel-notification/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/send-notification/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/auto-rank-promotion/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/_shared/cors.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/challenge-score-update/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/generate-tournament-bracket/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/spa-data-sync/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/create-club-payment/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/milestone-event/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/tournament-reminder-system/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/tournament-automation/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/ai-alert-analyzer/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/database-health-monitoring/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/create-tournament-payment/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/file-cleanup/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/tournament-data-sync/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/auto-cleanup-challenges/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/inactive-player-cleanup/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/database-health-check/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/analytics-refresh/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/sync-club-data/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/ai-admin-assistant/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/unified-notification-system/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/table-assignment/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/admin-system-reset/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/daily-checkin/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/ai-user-assistant/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/sync-tournament-rewards/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/generate-receipt/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/create-admin-user/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/scheduled-file-cleanup/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/notify-club-members/index.ts",
      "/workspaces/sabo-pool-v12/supabase/functions/weekly-reset/index.ts",
      "/workspaces/sabo-pool-v12/src/App.tsx",
      "/workspaces/sabo-pool-v12/lib/hooks/useCompleteTournament.ts",
      "/workspaces/sabo-pool-v12/vitest.config.ts",
      "/workspaces/sabo-pool-v12/sabo-pool-arena-hub-main/src/pages/Dashboard.tsx",
      "/workspaces/sabo-pool-v12/shared.package.config.ts"
    ],
    "table_references": {
      "profiles": [
        "/workspaces/sabo-pool-v12/supabase/functions/rank-request-notification/index.ts:          .from('profiles')",
        "/workspaces/sabo-pool-v12/supabase/functions/rank-request-notification/index.ts:          .from('club_profiles')",
        "/workspaces/sabo-pool-v12/supabase/functions/auto-rank-promotion/index.ts:      .from('profiles')",
        "/workspaces/sabo-pool-v12/supabase/functions/database-health-monitoring/index.ts:        .from('profiles')",
        "/workspaces/sabo-pool-v12/supabase/functions/database-health-monitoring/index.ts:      await supabase.from('profiles').select('id').limit(1);",
        "/workspaces/sabo-pool-v12/supabase/functions/database-health-monitoring/index.ts:        .from('profiles')",
        "/workspaces/sabo-pool-v12/supabase/functions/file-cleanup/index.ts:    .from('profiles')",
        "/workspaces/sabo-pool-v12/supabase/functions/inactive-player-cleanup/index.ts:          .from('profiles')",
        "/workspaces/sabo-pool-v12/supabase/functions/inactive-player-cleanup/index.ts:      .from('profiles')",
        "/workspaces/sabo-pool-v12/supabase/functions/database-health-check/index.ts:      supabase.from('profiles').select('count', { count: 'exact', head: true }),"
      ],
      "users": [
        "/workspaces/sabo-pool-v12/packages/shared-auth/src/auth-service.ts:      .from('users')",
        "/workspaces/sabo-pool-v12/packages/shared-auth/src/auth-service.ts:      .from('users')",
        "/workspaces/sabo-pool-v12/packages/shared-auth/src/auth-service.ts:      .from('users')",
        "/workspaces/sabo-pool-v12/apps/sabo-user/src/hooks/useChallenges.tsx:   // ✅ CRITICAL FIX: Fetch ALL challenges including open ones from other users"
      ],
      "user_roles": [
        "/workspaces/sabo-pool-v12/apps/sabo-user/src/hooks/useAuth.tsx:      .from('user_roles')"
      ],
      "user_preferences": [],
      "challenges": [
        "/workspaces/sabo-pool-v12/supabase/functions/sabo-match-updates/index.ts:      .from('sabo_challenges')",
        "/workspaces/sabo-pool-v12/supabase/functions/sabo-match-updates/index.ts:      .from('sabo_challenges')",
        "/workspaces/sabo-pool-v12/supabase/functions/challenge-score-update/index.ts:      .from('challenges')",
        "/workspaces/sabo-pool-v12/supabase/functions/inactive-player-cleanup/index.ts:      .from('challenges')",
        "/workspaces/sabo-pool-v12/supabase/functions/inactive-player-cleanup/index.ts:          .from('challenges')",
        "/workspaces/sabo-pool-v12/supabase/functions/admin-system-reset/index.ts:    .from('challenges')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/challenge/challenge-system.ts:        .from('challenges')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/challenge/challenge-system.ts:        .from('challenges')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/challenge/challenge-system.ts:        .from('challenges')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/challenge/challenge-system.ts:          .from('challenges')"
      ],
      "challenge_participants": [],
      "game_sessions": [],
      "shots": [],
      "tournaments": [
        "/workspaces/sabo-pool-v12/supabase/functions/generate-tournament-bracket/index.ts:      .from('tournaments')",
        "/workspaces/sabo-pool-v12/supabase/functions/generate-tournament-bracket/index.ts:      .from('tournaments')",
        "/workspaces/sabo-pool-v12/supabase/functions/generate-tournament-bracket/index.ts:      .from('tournaments')",
        "/workspaces/sabo-pool-v12/supabase/functions/tournament-reminder-system/index.ts:      .from('tournaments')",
        "/workspaces/sabo-pool-v12/supabase/functions/database-health-monitoring/index.ts:        .from('tournaments')",
        "/workspaces/sabo-pool-v12/supabase/functions/create-tournament-payment/index.ts:      .from('tournaments')",
        "/workspaces/sabo-pool-v12/supabase/functions/file-cleanup/index.ts:    .from('tournaments')",
        "/workspaces/sabo-pool-v12/supabase/functions/tournament-data-sync/index.ts:    .from('tournaments')",
        "/workspaces/sabo-pool-v12/supabase/functions/tournament-data-sync/index.ts:      .from('tournaments')",
        "/workspaces/sabo-pool-v12/supabase/functions/tournament-data-sync/index.ts:          .from('tournaments')"
      ],
      "tournament_brackets": [
        "/workspaces/sabo-pool-v12/supabase/functions/tournament-data-sync/index.ts:      .from('tournament_brackets')",
        "/workspaces/sabo-pool-v12/apps/sabo-user/src/components/tournament/BracketVisualization.tsx:    .from('tournament_brackets')",
        "/workspaces/sabo-pool-v12/apps/sabo-user/src/lib/tournament-backend-logic.ts:      .from('tournament_brackets')",
        "/workspaces/sabo-pool-v12/apps/sabo-user/src/hooks/useBracketGeneration.tsx:    .from('tournament_brackets')",
        "/workspaces/sabo-pool-v12/apps/sabo-user/src/hooks/useTournamentUtils.tsx:    .from('tournament_brackets')",
        "/workspaces/sabo-pool-v12/database-management/archive/functions_20250831_041233/tournament-data-sync/index.ts:      .from('tournament_brackets')"
      ],
      "tournament_registrations": [
        "/workspaces/sabo-pool-v12/supabase/functions/generate-tournament-bracket/index.ts:      .from('tournament_registrations')",
        "/workspaces/sabo-pool-v12/supabase/functions/tournament-reminder-system/index.ts:          .from('tournament_registrations')",
        "/workspaces/sabo-pool-v12/supabase/functions/database-health-monitoring/index.ts:        .from('tournament_registrations')",
        "/workspaces/sabo-pool-v12/supabase/functions/create-tournament-payment/index.ts:      .from('tournament_registrations')",
        "/workspaces/sabo-pool-v12/supabase/functions/inactive-player-cleanup/index.ts:      .from('tournament_registrations')",
        "/workspaces/sabo-pool-v12/supabase/functions/inactive-player-cleanup/index.ts:            .from('tournament_registrations')",
        "/workspaces/sabo-pool-v12/supabase/functions/unified-notification-system/index.ts:    .from('tournament_registrations')",
        "/workspaces/sabo-pool-v12/supabase/functions/unified-notification-system/index.ts:    .from('tournament_registrations')",
        "/workspaces/sabo-pool-v12/supabase/functions/notify-club-members/index.ts:      .from('tournament_registrations')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/tournament/TournamentAPIService.ts:        .from('tournament_registrations')"
      ],
      "clubs": [
        "/workspaces/sabo-pool-v12/supabase/functions/sync-club-data/index.ts:        .from('clubs')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/club/club-verification.ts:        .from('clubs')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/club/club-verification.ts:        .from('clubs')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/club/club-management.ts:        .from('clubs')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/club/club-management.ts:        .from('clubs')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/club/club-management.ts:        .from('clubs')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/club/club-management.ts:        .from('clubs')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/club/club-management.ts:        .from('clubs')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/analytics/analytics-system.ts:        .from('clubs')",
        "/workspaces/sabo-pool-v12/apps/sabo-user/src/utils/relationshipAutoFix.ts:    description: 'Fixed table name from clubs to club_profiles',"
      ],
      "club_members": [
        "/workspaces/sabo-pool-v12/packages/shared-business/src/admin/admin-system.ts:        .from('club_members')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/club/club-management.ts:        .from('club_members')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/club/club-management.ts:        .from('club_members')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/club/club-management.ts:        .from('club_members')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/club/club-management.ts:        .from('club_members')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/club/club-management.ts:        .from('club_members')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/club/club-management.ts:        .from('club_members')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/club/club-management.ts:        .from('club_members')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/club/club-management.ts:        .from('club_members')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/notification/notification-system.ts:        .from('club_members')"
      ],
      "club_settings": [
        "/workspaces/sabo-pool-v12/packages/shared-business/src/club/club-management.ts:        .from('club_settings')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/club/club-management.ts:        .from('club_settings')"
      ],
      "wallets": [
        "/workspaces/sabo-pool-v12/supabase/functions/database-health-check/index.ts:      supabase.from('wallets').select('count', { count: 'exact', head: true }),",
        "/workspaces/sabo-pool-v12/supabase/functions/admin-system-reset/index.ts:      .from('wallets')",
        "/workspaces/sabo-pool-v12/apps/sabo-user/src/components/WalletBalance.tsx:     .from('wallets')",
        "/workspaces/sabo-pool-v12/apps/sabo-user/src/components/mobile/MobileHeader.tsx:    .from('wallets')",
        "/workspaces/sabo-pool-v12/database-management/archive/functions_20250831_041233/database-health-check/index.ts:      supabase.from('wallets').select('count', { count: 'exact', head: true }),",
        "/workspaces/sabo-pool-v12/database-management/archive/functions_20250831_041233/admin-system-reset/index.ts:      .from('wallets')"
      ],
      "wallet_transactions": [],
      "payment_transactions": [
        "/workspaces/sabo-pool-v12/supabase/functions/payment-callback/index.ts:      .from('payment_transactions')",
        "/workspaces/sabo-pool-v12/supabase/functions/payment-callback/index.ts:        .from('payment_transactions')",
        "/workspaces/sabo-pool-v12/supabase/functions/payment-callback/index.ts:        .from('payment_transactions')",
        "/workspaces/sabo-pool-v12/supabase/functions/create-club-payment/index.ts:      .from('payment_transactions')",
        "/workspaces/sabo-pool-v12/supabase/functions/generate-receipt/index.ts:      .from('payment_transactions')",
        "/workspaces/sabo-pool-v12/database-management/archive/functions_20250831_041233/payment-callback/index.ts:      .from('payment_transactions')",
        "/workspaces/sabo-pool-v12/database-management/archive/functions_20250831_041233/payment-callback/index.ts:        .from('payment_transactions')",
        "/workspaces/sabo-pool-v12/database-management/archive/functions_20250831_041233/payment-callback/index.ts:        .from('payment_transactions')",
        "/workspaces/sabo-pool-v12/database-management/archive/functions_20250831_041233/create-club-payment/index.ts:      .from('payment_transactions')",
        "/workspaces/sabo-pool-v12/database-management/archive/functions_20250831_041233/generate-receipt/index.ts:      .from('payment_transactions')"
      ],
      "ranks": [
        "/workspaces/sabo-pool-v12/supabase/functions/auto-rank-promotion/index.ts:          `🎉 Successfully promoted player ${player.user_id} from ${player.ranks?.code} to next rank`",
        "/workspaces/sabo-pool-v12/supabase/functions/database-health-check/index.ts:      supabase.from('ranks').select('count', { count: 'exact', head: true }),",
        "/workspaces/sabo-pool-v12/supabase/functions/create-admin-user/index.ts:            .from('ranks')",
        "/workspaces/sabo-pool-v12/supabase/functions/create-admin-user/index.ts:            .from('ranks')",
        "/workspaces/sabo-pool-v12/supabase/functions/create-admin-user/index.ts:      .from('ranks')",
        "/workspaces/sabo-pool-v12/apps/sabo-user/src/hooks/useGameConfigStats.ts:          supabase.from('ranks').select('*', { count: 'exact', head: true }),",
        "/workspaces/sabo-pool-v12/apps/sabo-user/src/hooks/useRankDefinitions.ts:        .from('ranks')",
        "/workspaces/sabo-pool-v12/apps/sabo-user/src/hooks/useRankDefinitions.ts:        .from('ranks')",
        "/workspaces/sabo-pool-v12/apps/sabo-user/src/hooks/useRankDefinitions.ts:        .from('ranks')",
        "/workspaces/sabo-pool-v12/apps/sabo-user/src/hooks/useRankDefinitions.ts:      const { error } = await supabase.from('ranks').delete().eq('id', id);"
      ],
      "rank_requirements": [],
      "ranking_history": [
        "/workspaces/sabo-pool-v12/supabase/functions/auto-rank-promotion/index.ts:          await supabase.from('ranking_history').insert({",
        "/workspaces/sabo-pool-v12/database-management/archive/functions_20250831_041233/auto-rank-promotion/index.ts:          await supabase.from('ranking_history').insert({"
      ],
      "notifications": [
        "/workspaces/sabo-pool-v12/supabase/functions/payment-callback/index.ts:        await supabase.from('notifications').insert({",
        "/workspaces/sabo-pool-v12/supabase/functions/payment-callback/index.ts:        await supabase.from('notifications').insert({",
        "/workspaces/sabo-pool-v12/supabase/functions/rank-request-notification/index.ts:        .from('notifications')",
        "/workspaces/sabo-pool-v12/supabase/functions/rank-request-notification/index.ts:        .from('notifications')",
        "/workspaces/sabo-pool-v12/supabase/functions/send-notification/index.ts:        .from('notifications')",
        "/workspaces/sabo-pool-v12/supabase/functions/auto-rank-promotion/index.ts:        .from('notifications')",
        "/workspaces/sabo-pool-v12/supabase/functions/auto-rank-promotion/index.ts:      await supabase.from('notifications').insert(adminNotifications);",
        "/workspaces/sabo-pool-v12/supabase/functions/challenge-score-update/index.ts:      await supabase.from('notifications').insert({",
        "/workspaces/sabo-pool-v12/supabase/functions/challenge-score-update/index.ts:      await supabase.from('notifications').insert({",
        "/workspaces/sabo-pool-v12/supabase/functions/tournament-reminder-system/index.ts:            .from('notifications')"
      ],
      "system_events": [],
      "analytics_events": [
        "/workspaces/sabo-pool-v12/packages/shared-business/src/analytics/analytics-system.ts:        .from('analytics_events')",
        "/workspaces/sabo-pool-v12/apps/sabo-user/src/lib/analyticsTracker.ts:      await supabase.from('analytics_events' as any).insert({",
        "/workspaces/sabo-pool-v12/apps/sabo-user/src/lib/analyticsTracker.ts:      await supabase.from('analytics_events' as any).insert(formattedEvents);"
      ],
      "achievements": [],
      "leaderboards": [],
      "settings": [
        "/workspaces/sabo-pool-v12/packages/shared-business/src/club/club-management.ts:        total_tables: 0, // TODO: Get from club settings",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/club/club-management.ts:        .from('club_settings')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/club/club-management.ts:        .from('club_settings')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/user/user-settings.ts:        .from('user_settings')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/user/user-settings.ts:        .from('user_settings')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/user/user-settings.ts:        .from('notification_settings')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/user/user-settings.ts:        .from('notification_settings')",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/user/user-settings.ts:      await this.supabase.from('user_settings').delete().eq('user_id', userId);",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/user/user-settings.ts:      await this.supabase.from('notification_settings').delete().eq('user_id', userId);",
        "/workspaces/sabo-pool-v12/packages/shared-business/src/user/index.ts:export * from './user-settings';"
      ]
    },
    "schema_files": [],
    "migration_files": [
      "/workspaces/sabo-pool-v12/supabase/migrations/00000000000001_initial_setup.sql",
      "/workspaces/sabo-pool-v12/database_migration/migrations/006_advanced_validation.sql",
      "/workspaces/sabo-pool-v12/database_migration/migrations/002_validation_scripts.sql",
      "/workspaces/sabo-pool-v12/database_migration/migrations/012_rollback_system.sql",
      "/workspaces/sabo-pool-v12/database_migration/migrations/003_backward_compatibility.sql",
      "/workspaces/sabo-pool-v12/database_migration/migrations/007_backward_compatibility.sql",
      "/workspaces/sabo-pool-v12/database_migration/migrations/006_metrics_extension.sql",
      "/workspaces/sabo-pool-v12/database_migration/migrations/011_deployment_automation.sql",
      "/workspaces/sabo-pool-v12/database_migration/migrations/008_advanced_optimizations.sql",
      "/workspaces/sabo-pool-v12/database_migration/migrations/014_maintenance_automation.sql",
      "/workspaces/sabo-pool-v12/database_migration/migrations/010_performance_monitoring.sql",
      "/workspaces/sabo-pool-v12/database_migration/migrations/013_monitoring_system.sql",
      "/workspaces/sabo-pool-v12/database_migration/migrations/015_business_intelligence.sql",
      "/workspaces/sabo-pool-v12/database_migration/migrations/000_optimized_schema.sql",
      "/workspaces/sabo-pool-v12/scripts/deploy-season-history.sql",
      "/workspaces/sabo-pool-v12/scripts/deploy-current-season.sql",
      "/workspaces/sabo-pool-v12/demo-data/clubs_demo.sql",
      "/workspaces/sabo-pool-v12/demo-data/ranking_demo.sql",
      "/workspaces/sabo-pool-v12/demo-data/tournaments_demo.sql",
      "/workspaces/sabo-pool-v12/demo-data/wallet_demo.sql"
    ],
    "supabase_types": null
  },
  "schema_inference": {
    "total_migrations": 20,
    "table_creations": [],
    "column_definitions": {},
    "relationships": []
  },
  "recommendations": [],
  "insights": {
    "recommendations": [
      "Kiểm tra và populate dữ liệu demo cho các bảng trống"
    ],
    "warnings": [
      "17 bảng không có dữ liệu: users, user_preferences, challenge_participants, game_sessions, shots, tournament_brackets, clubs, club_settings, wallet_transactions, payment_transactions, rank_requirements, ranking_history, system_events, analytics_events, achievements, leaderboards, settings"
    ],
    "successes": [
      "9 bảng đã có dữ liệu: profiles (181 records), user_roles (97 records), challenges (10 records), tournaments (2 records), tournament_registrations (284 records), club_members (10 records), wallets (186 records), ranks (12 records), notifications (692 records)"
    ]
  },
  "summary": {
    "analysis_timestamp": "2025-08-31T04:37:51.963Z",
    "database_status": "Connected with Service Role",
    "total_accessible_tables": 26,
    "tables_with_data": 9,
    "total_typescript_files": 50,
    "total_migration_files": 20,
    "database_health": "Moderate"
  }
}